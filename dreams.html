<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>篠宮澪｜夢圖專區</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="mio.css">
  <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@200;300;400;500;600&display=swap" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="favicon.png" type="image/png">
<link rel="shortcut icon" href="favicon.png" type="image/png">
<meta property="og:image" content="https://mioshinomiyalin.github.io/mioshinomiya/雙立繪.JPG">

</head>
<body class="page-dreams">
  <!-- 導覽列（全站共用） -->
<header class="site-header">
  <div class="header-inner">
    <div class="logo-block">
      <a href="index.html" class="logo-mark" aria-label="回到首頁">✶</a>
      <div>
        <div class="logo-text-main">MIO DREAM NOTE</div>
        <div class="logo-text-sub">篠宮澪｜夢向專屬小宇宙</div>
      </div>
    </div>

    <!-- 漢堡按鈕（手機用） -->
    <button class="nav-toggle" aria-label="切換選單" style="color: rgb(51, 20, 81)">
      ---
      ✶選單✶
      ---
    </button>

    <!-- 導覽列 -->
    <nav class="site-nav">
      <ul class="nav-list">
        <li><a href="index.html"   class="nav-link">首頁</a></li>
        <li><a href="profile.html" class="nav-link">人設</a></li>
        <li><a href="ability.html" class="nav-link">能力</a></li>
        <li><a href="wardrobe.html" class="nav-link">澪的衣帽間</a></li>
        <li><a href="dreams.html"  class="nav-link nav-link-active">夢圖專區</a></li>
        <li><a href="story.html"   class="nav-link">主線故事</a></li>
        <li><a href="relation.html" class="nav-link">關係年表</a></li>
      </ul>
    </nav>
  </div>
</header>


<main class="page-wrapper">
  <h1 class="page-title">夢圖專區</h1>
  <p class="page-subtitle">
    有發過的夢圖都會出現在這<br>
    如果沒有就是我還沒更新＞＜
  </p>

  <section class="card gallery-card">
    <div class="gallery-header">
      <div class="gallery-search">
        <span class="gallery-search-icon">🔍</span>
        <input type="text" id="dreamSearch"
               placeholder="搜尋標題／標籤／關鍵字，例如：神社、戰鬥、雨"
               aria-label="搜尋夢圖">
      </div>
      <div class="gallery-filters">
        <button class="filter-chip is-active" data-gallery-filter="all">全部</button>
        <button class="filter-chip" data-gallery-filter="personal">非委託</button>
        <button class="filter-chip" data-gallery-filter="commission">委託</button>
      </div>
    </div>

    <div class="gallery-grid" id="dreamGrid">
      <!-- ☆☆☆ 夢圖卡片開始：下面每一個 article 就是一張夢圖 ☆☆☆ -->      

      <!-- 非委託範例 -->
      <article class="gallery-work"
              data-type="personal"
              data-keywords="非委託 百日 百日賀 澪 雙人 溫柔 櫻花"
              data-full="澪×黑死牟

              ⫘⫘⫘ˎˊ˗ ·˖✶ ☽𝓓𝓪𝔂𝟏𝟎𝟎 ☾ ✶˖· ˗ˏˋ⫘⫘⫘

              夜色靜得像一口深井，櫻花卻偏偏在這樣的夜裡落得最囂張，枝梢被風壓低，花瓣成片成片地飄過簷下，把整個和室映得像春天最溫柔的幻術。

              澪坐在他身側，紫色的和服像夜色化開的一道光，她偏著頭，眼裡盛著月色與櫻色的混合——那種只有在他身邊才會出現的、柔軟得不像她平常樣子的表情。

              「なあ、花……きれいだね。」

              她抬起手指，像要試著輕碰落下的一片花瓣，又像是要指出什麼專屬於他們的小景色。語氣輕得像夢話，卻又真切得能穿進骨縫。

              黑死牟側頭看她。那眼眸裡映出的，不是夜，也不是櫻，而是她。

              「……ああ……美しい……」

              語尾低沉得像風從山脊滑下來，只為落進她耳畔———

              落櫻飄過兩人之間的縫隙，像是將這個畫面一層層封存：

              她明亮、天真、溫柔得近乎殘酷。
              他寡言、壓抑、心裡藏著千百年也熄不了的黑暗。

              但就在這個夜晚，她的依靠使他整個世界安靜下來。

              ⫘⫘⫘ˎˊ˗ ·˖✶ ☽ ☼ ☾ ✶˖· ˗ˏˋ⫘⫘⫘">
        <img src="死澪百日賀.jpg" alt="百日">
        <div class="gallery-work-main">
          <div class="gallery-work-title">百日</div>
          <div class="gallery-tags">
            <span class="gallery-tag">非委託</span>
            <span class="gallery-tag">Day100</span>
            <span class="gallery-tag">櫻花</span>
          </div>
          <p class="gallery-desc">澪×黑死牟｜百日賀</p>
        </div>
        <div class="gallery-actions">
          <button class="gallery-btn js-gallery-modal">放大檢視</button>
        </div>
      </article>
      <article class="gallery-work"
         data-type="personal"
         data-keywords="非委託 默許 澪 姿勢 99"
         data-full="澪×黑死牟

        ⫘⫘⫘ˎˊ˗ ·˖✶ ☽ 𝓓𝓪𝔂𝟗𝟗 ☾ ✶˖· ˗ˏˋ⫘⫘⫘

        黒死牟靜靜站立。
        那不是普通的沉默，而是足以讓空氣緊繃的——「強者氣息」。

        他不用拔刀，也不用開口，只要站在那裡，就是壓倒性的力量——讓人本能後退的「上弦之壹」。

        澪卻坐在他的肩上，垂著腿，
        像坐在世上最安全的位置。

        她的笑有點壞，像是在炫耀：

        「只有我能坐在這裡喔~」

        黒死牟沒有阻止她。
        甚至微微抬手，確保她不會滑下來。

        他的姿態依舊端正、威壓不減，
        彷彿肩上坐著的不是重量，
        而是他願意承受的唯一例外……

        ⫘⫘⫘ˎˊ˗ ·˖✶ ☽ ☼ ☾ ✶˖· ˗ˏˋ⫘⫘⫘">
          <img src="姿勢半身.JPG" alt="默許">
          <div class="gallery-work-main">
            <div class="gallery-work-title">默許</div>
            <div class="gallery-tags">
              <span class="gallery-tag">非委託</span>
              <span class="gallery-tag">Day99</span>
              <span class="gallery-tag">姿勢</span>
            </div>
            <p class="gallery-desc">澪×黑死牟｜她坐於肩上·上弦之壹的默許</p>
          </div>
          <div class="gallery-actions">
            <button class="gallery-btn js-gallery-modal">放大檢視</button>
          </div>
        </article>
        <article class="gallery-work"
         data-type="personal"
         data-keywords="非委託 依靠 澪 煙火 98 祭典"
         data-full="澪×黑死牟
          ⫘⫘⫘ˎˊ˗ ·˖✶ ☽𝓓𝓪𝔂𝟗𝟖 ☾ ✶˖· ˗ˏˋ⫘⫘⫘

          祭典的燈光把人潮染得暖暖的，煙火在頭頂炸開，澪的笑意也一起綻放

          黑死牟的六隻眼被那柔軟的、黏糊糊的「喜歡」填滿
          外人看不懂，他自己也看不太懂——只是澪靠過來的那一下，他卻連呼吸都小心翼翼

          澪：「……きれいだね」

          黒死牟：「……意味がわからぬ」

          ⫘⫘⫘ˎˊ˗ ·˖✶ ☽ ☼ ☾ ✶˖· ˗ˏˋ⫘⫘⫘">
          <img src="祭典.png" alt="祭">
          <div class="gallery-work-main">
            <div class="gallery-work-title">祭</div>
            <div class="gallery-tags">
              <span class="gallery-tag">非委託</span>
              <span class="gallery-tag">Day98</span>
              <span class="gallery-tag">依靠</span>
            </div>
            <p class="gallery-desc">澪×黑死牟｜祭典中的依偎</p>
          </div>
          <div class="gallery-actions">
            <button class="gallery-btn js-gallery-modal">放大檢視</button>
          </div>
        </article>
      <article class="gallery-work"
              data-type="personal"
              data-keywords="非委託  澪 雙人 溫柔  あの人を嫁にしたい"
              data-full=" あの人を嫁にしたい">
        <img src="事後.JPG" alt=" あの人を嫁にしたい">
        <div class="gallery-work-main">
          <div class="gallery-work-title"> あの人を嫁にしたい</div>
          <div class="gallery-tags">
            <span class="gallery-tag">非委託</span>
            <span class="gallery-tag">事後感</span>
          </div>
          <p class="gallery-desc">澪×黑死牟｜ あの人を嫁にしたい</p>
        </div>
        <div class="gallery-actions">
          <button class="gallery-btn js-gallery-modal">放大檢視</button>
        </div>
      </article>
      <article class="gallery-work"
              data-type="commission"
              data-keywords="委託  澪 雙人 小動物  貼貼"
              data-full="澪×黑死牟
                           ͙ ⁺˚*･༓☾　☽༓･*˚⁺ ͙
                      ——黑狼守著她，像守著唯一的夜
                      ——雪貂黏著他，像整片星空都落在他懷裡
                           ͙ ⁺˚*･༓☾　☽༓･*˚⁺ ͙">
        <img src="小動物.jpg" alt=" 小動物貼貼">
        <div class="gallery-work-main">
          <div class="gallery-work-title">小動物貼貼</div>
          <div class="gallery-tags">
            <span class="gallery-tag">委託</span>
            <span class="gallery-tag">小動物</span>
          </div>
          <p class="gallery-desc">澪×黑死牟｜ 小動物貼貼</p>
        </div>
        <div class="gallery-actions">
          <button class="gallery-btn js-gallery-modal">放大檢視</button>
        </div>
      </article>

      <!-- ☆☆☆ 夢圖卡片結束：新增作品只要插在上面 ☆☆☆ -->
    </div>
  </section>
</main>

<!-- 夢圖／衣帽間共用：圖片詳細 Modal -->
<div class="gallery-modal" id="galleryModal" aria-hidden="true">
  <div class="gallery-modal-backdrop"></div>
  <div class="gallery-modal-dialog" role="dialog" aria-modal="true" aria-labelledby="galleryModalTitle">
    <button type="button" class="gallery-modal-close" aria-label="關閉">×</button>
    <h2 id="galleryModalTitle" class="gallery-modal-title">標題</h2>
    <div class="gallery-modal-body">
      <img src="" alt="" class="gallery-modal-img" id="galleryModalImage">
      <p class="gallery-modal-text" id="galleryModalText"></p>
    </div>
  </div>
</div>

<div id="toast"></div>

<script>
  const $  = (s,r=document)=>r.querySelector(s);
  const $$ = (s,r=document)=>[...r.querySelectorAll(s)];

  function showToast(msg){
    const t = $('#toast');
    if (!t) return;
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(()=>t.classList.remove('show'), 1400);
  }

  // 搜尋 + 篩選
  (function setupFilter(){
    const searchInput = $('#dreamSearch');
    const chips = $$('.filter-chip');
    const cards = $$('.gallery-work');
    let current = 'all';

    function apply(){
      const kw = (searchInput.value || '').toLowerCase().trim();
      cards.forEach(card=>{
        const type = card.dataset.type;
        const text = (card.dataset.keywords || '').toLowerCase();
        const hitType = (current === 'all' || type === current);
        const hitKw   = !kw || text.includes(kw);
        card.style.display = (hitType && hitKw) ? 'flex' : 'none';
      });
    }

    if (searchInput) {
      searchInput.addEventListener('input', apply);
    }

    chips.forEach(chip=>{
      chip.addEventListener('click', ()=>{
        chips.forEach(c=>c.classList.remove('is-active'));
        chip.classList.add('is-active');
        current = chip.dataset.galleryFilter || 'all';
        apply();
      });
    });

    apply();
  })();

  // 點「複製圖片連結」的鈕（之後你要用 data-copy-src 可以直接吃這段）
  document.addEventListener('click', async (e)=>{
    const btn = e.target.closest('[data-copy-src]');
    if(!btn) return;
    const src = btn.getAttribute('data-copy-src');
    try{
      await navigator.clipboard.writeText(src);
      showToast('圖片連結已複製');
    }catch{
      showToast('瀏覽器不支援自動複製 QQ');
    }
  });

  // 圖片放大 Modal
  (function setupGalleryModal(){
    const modal      = document.getElementById('galleryModal');
    if (!modal) return;

    const modalImg   = document.getElementById('galleryModalImage');
    const modalText  = document.getElementById('galleryModalText');
    const modalTitle = document.getElementById('galleryModalTitle');
    const backdrop   = modal.querySelector('.gallery-modal-backdrop');
    const closeBtn   = modal.querySelector('.gallery-modal-close');

    function openModal(card){
      const img   = card.querySelector('img');
      const title = card.querySelector('.gallery-work-title').textContent.trim();
      const desc  = card.querySelector('.gallery-desc')?.textContent.trim() || "";
      const fullText = card.getAttribute('data-full') || desc;

      if (img) {
        modalImg.src = img.src;
        modalImg.alt = img.alt || title;
      } else {
        modalImg.src = "";
        modalImg.alt = "";
      }

      modalTitle.textContent = title;
      modalText.textContent  = fullText;

      // ★ 統一用 is-open，跟 CSS、關閉邏輯一致
      modal.classList.add('is-open');
      modal.setAttribute('aria-hidden', 'false');
    }

    function closeModal(){
      modal.classList.remove('is-open');
      modal.setAttribute('aria-hidden', 'true');
    }

    // 點卡片上的「放大檢視」
    document.addEventListener('click', (e)=>{
      const btn = e.target.closest('.js-gallery-modal');
      if(!btn) return;
      const card = btn.closest('.gallery-work');
      if(card) {
        e.preventDefault();
        openModal(card);
      }
    });

    // 點背景或關閉按鈕關掉
    [backdrop, closeBtn].forEach(el=>{
      if (!el) return;
      el.addEventListener('click', closeModal);
    });

    // ESC 關閉
    document.addEventListener('keydown', (e)=>{
      if (e.key === 'Escape' && modal.classList.contains('is-open')) {
        closeModal();
      }
    });
  })();
</script>
<script>
  const toggle = document.querySelector('.nav-toggle');
  const nav = document.querySelector('.site-nav');

  if (toggle && nav) {
    toggle.addEventListener('click', () => {
      nav.classList.toggle('is-open');
    });
  }
</script>

</body>
</html>
